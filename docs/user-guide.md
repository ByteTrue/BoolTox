# 用户使用指南

BoolTox 的使用非常简单：添加工具源 → 安装工具 → 一键启动。

---

## 1. 安装 BoolTox

### 方式一：下载预编译版本（推荐）

前往 [Releases](https://github.com/ByteTrue/BoolTox/releases) 下载对应平台的安装包：

- **Windows**：`BoolTox-Setup-{version}.exe`
- **macOS**：`BoolTox-{version}.dmg` 或 `BoolTox-{version}-arm64.dmg`（Apple Silicon）
- **Linux**：`BoolTox-{version}.AppImage`

双击安装即可。

### 方式二：从源码构建

```bash
git clone https://github.com/ByteTrue/BoolTox.git
cd BoolTox
pnpm install
pnpm dev:client  # 开发模式
# 或
pnpm release     # 打包生产版本
```

**要求**：Node.js `>=20`，pnpm `>=8`

---

## 2. 首次启动

启动 BoolTox 后，你会看到空白的首页（因为还没有安装任何工具）。

**推荐操作流程**：
1. 添加工具源（获取在线工具列表）
2. 浏览工具商店（安装需要的工具）
3. 回到首页一键启动

---

## 3. 添加工具源

工具源是工具的仓库，类似 apt 源或 npm 仓库。BoolTox 支持三种工具源：

### 3.1 官方工具源（推荐）

**步骤**：
1. 点击顶部导航 **设置** → **工具源**
2. 点击 **添加工具源**
3. 选择 **官方源**（预配置，无需填写）
4. 点击 **保存**

官方源包含经过验证的常用开发工具。

### 3.2 自定义 GitHub/Gitee 源

如果你或你的团队有自己的工具仓库：

**步骤**：
1. 设置 → 工具源 → 添加工具源
2. 填写信息：
   - **名称**：自定义（如"公司内部工具"）
   - **类型**：GitHub / Gitee / GitLab
   - **仓库路径**：`owner/repo`（如 `ByteTrue/booltox-tools`）
   - **分支**（可选）：默认 `main`
3. 点击 **测试连接**（验证仓库可访问）
4. 点击 **保存**

**工具源仓库结构**：
```
my-tools/
├── booltox-index.json    # 工具索引（必需）
└── tools/
    ├── tool-1/
    │   └── booltox.json
    └── tool-2/
        └── booltox.json
```

`booltox-index.json` 示例：
```json
{
  "tools": [
    { "id": "my-tool-1", "path": "tools/tool-1" },
    { "id": "my-tool-2", "path": "tools/tool-2" }
  ]
}
```

### 3.3 本地工具源

用于开发测试或离线环境：

**步骤**：
1. 设置 → 工具源 → 添加工具源
2. 选择 **本地路径**
3. 点击 **浏览**，选择包含 `booltox.json` 或 `booltox-index.json` 的目录
4. 点击 **保存**

---

## 4. 安装工具

### 4.1 从工具商店安装（推荐）

**步骤**：
1. 点击顶部导航 **工具库**（或首页的"浏览工具"按钮）
2. 浏览在线工具列表（来自已添加的工具源）
3. 找到需要的工具，点击 **安装**
4. 等待下载和依赖安装（Python 工具会自动创建 venv）
5. 安装完成后，工具会出现在"已安装"列表

**安装过程**：
- 下载工具代码（从 Git 仓库或 ZIP 包）
- 自动检测依赖（`requirements.txt` / `package.json`）
- 弹出依赖安装窗口（可查看安装进度）
- 安装完成，工具就绪

### 4.2 添加本地二进制工具

如果你有一个可执行文件（如 Go/Rust 编译的工具）：

**步骤**：
1. 首页 → 点击 **添加本地工具** 按钮
2. 选择可执行文件（`.exe` / `.app` / `.bin` 等）
3. BoolTox 自动生成 `booltox.json`
4. 工具出现在已安装列表

**支持的文件类型**：
- Windows: `.exe`
- macOS: `.app` 或无扩展名的可执行文件
- Linux: `.bin` / `.sh` 或无扩展名的可执行文件

---

## 5. 启动和管理工具

### 5.1 启动工具

**方式一：首页快速启动**
1. 回到首页
2. 在"快速启动"区域，切换到 **收藏** / **最近** / **运行中**
3. 点击工具卡片 → 自动启动

**方式二：工具库启动**
1. 工具库 → 已安装
2. 找到工具，点击 **启动** 按钮

**启动行为**（根据工具类型）：
- **HTTP 服务**（http-service）：在 BoolTox 内嵌浏览器标签页中打开
- **CLI 工具**（cli）：在系统终端中运行
- **独立 GUI**（standalone）：启动独立窗口
- **二进制**（binary）：作为独立进程启动

### 5.2 停止工具

**方式一：标签页关闭**
- 对于 http-service 工具，关闭标签页会自动停止后端进程

**方式二：工具列表停止**
- 首页 → 运行中 → 点击工具卡片上的 **停止** 按钮
- 或 工具库 → 已安装 → 点击运行中工具的 **停止** 按钮

### 5.3 更新工具

**步骤**：
1. 工具库 → 已安装
2. 如果工具有更新，会显示 **可更新** 标签
3. 点击工具卡片 → 点击 **更新** 按钮
4. 等待更新完成（会重新下载代码和依赖）

**批量更新**：
- 工具库 → 已安装 → 点击顶部 **全部更新** 按钮

### 5.4 卸载工具

**步骤**：
1. 工具库 → 已安装
2. 找到要卸载的工具，点击 **卸载** 按钮
3. 确认卸载

**注意**：
- 卸载会删除工具代码和虚拟环境（`venv` / `node_modules`）
- 开发模式的工具（来自 `examples/` 目录）不可卸载

---

## 6. 收藏与快速启动

### 6.1 收藏工具

**步骤**：
1. 工具库 → 已安装
2. 找到常用工具，点击工具卡片右上角的 **星标** 图标
3. 工具会出现在首页的"快速启动 → 收藏"列表

### 6.2 拖拽排序

首页的收藏列表支持拖拽排序：
1. 首页 → 快速启动 → 收藏
2. 长按工具卡片，拖动到目标位置
3. 松开即可保存

### 6.3 最近使用

BoolTox 自动记录工具的启动历史：
- 首页 → 快速启动 → 最近
- 按使用时间倒序排列（最近使用的在前）

---

## 7. 设置与配置

### 7.1 应用设置

**路径**：设置 → 通用设置

可配置项：
- **开机自启动**：系统启动时自动打开 BoolTox
- **关闭到托盘**：点击关闭按钮时最小化到系统托盘（而不是退出）
- **主题**：亮色 / 暗色（自动跟随系统）

### 7.2 开发者设置

**路径**：设置 → 开发者

功能：
- **查看日志**：打开日志文件夹（用于排查问题）
- **系统信息**：查看 CPU、内存、磁盘使用情况
- **Python 环境**：查看 Python 状态（uv 版本、Python 版本）

### 7.3 工具源管理

**路径**：设置 → 工具源

操作：
- **添加**：添加新工具源
- **编辑**：修改已有工具源的配置
- **删除**：移除工具源（不会删除已安装的工具）
- **测试连接**：验证工具源是否可访问

---

## 8. 常见操作

### 8.1 查看工具日志

如果工具无法启动或运行异常：

**步骤**：
1. 设置 → 开发者 → 查看日志
2. 打开日志文件夹 → 查找最新的日志文件
3. 搜索工具 ID 或错误信息

**日志位置**：
- Windows: `%APPDATA%/BoolTox/logs/`
- macOS: `~/Library/Application Support/BoolTox/logs/`
- Linux: `~/.config/BoolTox/logs/`

### 8.2 清理缓存

如果 BoolTox 占用磁盘过多：

**手动清理**：
1. 关闭 BoolTox
2. 删除以下目录：
   - **工具缓存**：`{userData}/tools/`（⚠️ 会删除所有已安装工具）
   - **Python 环境**：`{userData}/tool-envs/`（⚠️ 会删除所有虚拟环境）

**自动清理**（未实现，计划中）：
- 设置 → 存储 → 清理未使用的虚拟环境

### 8.3 导入/导出配置

**导出**（未实现，计划中）：
- 设置 → 数据管理 → 导出配置
- 导出 JSON 文件（包含工具源、已安装工具列表、收藏）

**导入**（未实现，计划中）：
- 设置 → 数据管理 → 导入配置
- 选择 JSON 文件 → 自动恢复配置

---

## 9. 常见问题

### 工具无法启动

**可能原因**：
1. 端口被占用（http-service 工具）
2. Python 环境未就绪
3. 依赖安装失败

**排查步骤**：
1. 查看日志（设置 → 开发者 → 查看日志）
2. 检查端口（`netstat -ano | findstr <port>`）
3. 手动安装依赖（设置 → 开发者 → Python 环境）

### 依赖安装失败

**可能原因**：
1. 网络问题（无法连接 PyPI / npm）
2. `requirements.txt` 或 `package.json` 错误
3. Python/Node.js 版本不兼容

**解决方案**：
1. 配置国内镜像源（如 阿里云 PyPI 镜像）
2. 检查 `requirements.txt` 是否正确
3. 更新 Python/Node.js 版本

### 工具更新后无法启动

**可能原因**：
1. 新版本引入了不兼容的依赖
2. 虚拟环境缓存未清理

**解决方案**：
1. 卸载工具 → 重新安装
2. 手动删除 `{userData}/tool-envs/{toolId}/`

---

## 10. 反馈与支持

- **报告 Bug**：[GitHub Issues](https://github.com/ByteTrue/BoolTox/issues)
- **功能建议**：[GitHub Discussions](https://github.com/ByteTrue/BoolTox/discussions)
- **文档问题**：提交 Pull Request

---

**下一步**：
- 📖 阅读 [工具开发指南](plugins/development-guide.md) 学习如何创建工具
- 🏗️ 阅读 [架构概览](architecture-overview.md) 了解 BoolTox 内部实现
